{% extends "layout.html" %} {% block content %}
<h1>User Data</h1>
<p>Choose a question to see the results</p>
<form action="/user_data" method="POST">
  <select name="question_id">
  {% for question in questions %}
    <option value="{{ question.question_id }}">{{ question.question_title }}</option>
  {% endfor %}
  </select>
  <input type="submit" value="Show" />
  <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}" />
</form>
<hr />
  
{% if values %}
<h2>{{ title }}</h2>
<div>
  <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById("myChart");
  

  new Chart(ctx, {
    type: "line",
    data: {
      labels: {{ labels|safe }},
      datasets: [
        {
          label: "Data",
          data: {{ values|safe }},
          borderWidth: 1,
        },
      ],
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          suggestedMax: 4,
          ticks: {
            stepSize: 1,
            precision: 0
          },
        },
      },
    },
  });
</script>
{% endif %}

<a href="/">Back</a>
</body>
</html>
{% endblock %}